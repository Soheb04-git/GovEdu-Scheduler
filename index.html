<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>EduSchedule Pro - Smart Timetable Scheduler</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="stylesheet" href="timetable2.css">
        <style>
        /* Extra responsive tweaks for mobile/tablet */
        @media (max-width: 1024px) {
            .container { padding-left: 0.5rem !important; padding-right: 0.5rem !important; }
            .card-shadow { box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
            .rounded-xl { border-radius: 0.7rem !important; }
            .student-card { margin-bottom: 1rem !important; }
            .grid { gap: 1rem !important; }
            .space-y-6 > * { margin-bottom: 1.2rem !important; }
            .p-6 { padding: 1.2rem !important; }
            .p-8 { padding: 1.5rem !important; }
            .py-8 { padding-top: 1.5rem !important; padding-bottom: 1.5rem !important; }
            .px-6 { padding-left: 1rem !important; padding-right: 1rem !important; }
            .text-2xl { font-size: 1.3rem !important; }
            .text-3xl { font-size: 1.7rem !important; }
        }
        @media (max-width: 768px) {
            .container { max-width: 100vw !important; }
            .grid { grid-template-columns: 1fr !important; }
            .md\:grid-cols-2, .md\:grid-cols-3, .md\:grid-cols-4 { grid-template-columns: 1fr !important; }
            .flex { flex-direction: column !important; gap: 0.7rem !important; }
            .flex-wrap { flex-wrap: wrap !important; }
            .p-6, .p-8 { padding: 0.7rem !important; }
            .py-8 { padding-top: 1rem !important; padding-bottom: 1rem !important; }
            .px-6 { padding-left: 0.5rem !important; padding-right: 0.5rem !important; }
            .text-2xl { font-size: 1.1rem !important; }
            .text-3xl { font-size: 1.3rem !important; }
            .rounded-xl { border-radius: 0.5rem !important; }
            .card-shadow { box-shadow: 0 2px 6px rgba(0,0,0,0.07); }
            .overflow-x-auto { overflow-x: scroll !important; }
            table { font-size: 0.9rem !important; }
            th, td { padding: 0.5rem !important; }
            .min-w-full, .min-w-24, .min-w-32 { min-width: 0 !important; }
        }
        </style>
        <!-- End responsive tweaks -->
    
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center gradient-bg" style="display:block;">
        <div class="bg-white rounded-2xl p-8 card-shadow max-w-md w-full mx-4">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-3xl">🎓</span>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">EduSchedule Pro</h1>
                <p class="text-gray-600">Smart Timetable Scheduler</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">User Role</label>
                    <select id="userRole" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="autoFillCredentials()">
                        <option value="admin">👑 System Administrator</option>
                        <option value="department">🏛️ Department Head</option>
                        <option value="faculty">👨‍🏫 Faculty Member</option>
                        <option value="student">🎒 Student</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                
                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                    🚀 Login to Dashboard
                </button>
            </form>

            <script>
            function autoFillCredentials() {
                var role = document.getElementById('userRole').value;
                var username = document.getElementById('username');
                var password = document.getElementById('password');
                if (role === 'admin') {
                    username.value = 'admin';
                    password.value = 'admin123';
                } else if (role === 'department') {
                    username.value = 'dept';
                    password.value = 'dept123';
                } else if (role === 'faculty') {
                    username.value = 'faculty';
                    password.value = 'faculty123';
                } else if (role === 'student') {
                    username.value = 'student';
                    password.value = 'student123';
                } else {
                    username.value = '';
                    password.value = '';
                }
            }
            </script>
            
            <div class="mt-6 text-center">
                <p class="text-xs text-gray-500">Demo Credentials: admin/admin123, dept/dept123, faculty/faculty123, student/student123</p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <!-- Header -->
        <header class="gradient-bg text-white shadow-lg sticky top-0 z-50">
            <div class="container mx-auto px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                            <span class="text-2xl">🎓</span>
                        </div>
                        <div>
                            <h1 id="appTitle" class="text-2xl font-bold">EduSchedule Pro</h1>
                            <p class="text-sm opacity-90">Smart Timetable Management System</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span id="userInfo" class="role-badge text-xs px-3 py-1 rounded-full text-white font-medium"></span>
                        <button id="logoutBtn" onclick="logout()" class="bg-white bg-opacity-20 px-4 py-2 rounded-lg hover:bg-opacity-30 transition-all" style="display:none;">
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="container mx-auto px-6 py-8">
            <!-- Role-Based Navigation -->
            <div class="mb-8">
                <div id="adminTabs" class="hidden flex flex-wrap space-x-1 bg-white rounded-lg p-1 card-shadow">
                    <button id="dashboardTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all bg-blue-600 text-white text-sm">
                        📊 Dashboard
                    </button>
                    <button id="dataInputTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-blue-600 text-sm">
                        📝 Data Input
                    </button>
                    <button id="scheduleTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-blue-600 text-sm">
                        🧠 Generate Schedule
                    </button>
                    <button id="editorTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-blue-600 text-sm">
                        ✏️ Timetable Editor
                    </button>
                    <button id="reportsTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-blue-600 text-sm">
                        📈 Reports
                    </button>
                </div>

                <div id="departmentTabs" class="hidden flex flex-wrap space-x-1 bg-white rounded-lg p-1 card-shadow">
                    <button id="approvalTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all bg-green-600 text-white text-sm">
                        ✅ Approval Workflow
                    </button>
                    <button id="deptViewTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-green-600 text-sm">
                        📅 Department View
                    </button>
                    <button id="deptReportsTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-green-600 text-sm">
                        📊 Department Reports
                    </button>
                </div>

                <div id="facultyTabs" class="hidden flex flex-wrap space-x-1 bg-white rounded-lg p-1 card-shadow">
                    <button id="facultyViewTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all bg-purple-600 text-white text-sm">
                        👨‍🏫 My Schedule
                    </button>
                    <button id="availabilityTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-purple-600 text-sm">
                        📋 Availability
                    </button>
                    <button id="facultyReportsTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-purple-600 text-sm">
                        📈 My Reports
                    </button>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboardSection" class="space-y-6">
                <div class="grid md:grid-cols-4 gap-6">
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                <div id="studentTabs" class="hidden flex flex-wrap space-x-1 bg-white rounded-lg p-1 card-shadow">
            <!-- Student Feedback Section -->
            <div id="studentFeedbackSection" class="hidden bg-white rounded-xl p-6 card-shadow mt-6">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">Feedback</h2>
                <div class="flex gap-2 mb-2">
                    <input id="feedbackInput" type="text" placeholder="Give feedback..." class="border px-3 py-2 rounded-lg flex-1">
                    <button id="submitFeedbackBtn" class="bg-gray-600 text-white px-5 py-2 rounded-lg shadow hover:bg-gray-700 transition">Submit</button>
                </div>
                <div id="feedbackStatus" class="mt-4 text-base text-gray-700"></div>
            </div>
                    <button id="studentScheduleTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all bg-yellow-500 text-white text-sm">📅 My Timetable</button>
                    <button id="studentBatchTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-yellow-500 text-sm">👥 My Batch</button>
                    <button id="studentReportTab" class="flex-1 py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-yellow-500 text-sm">📈 My Attendance/Reports</button>
                </div>
                                <p class="text-sm text-gray-600">Total Classrooms</p>
                                <p class="text-2xl font-bold text-blue-600">24</p>
                            </div>
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">🏫</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Active Faculty</p>
                                <p class="text-2xl font-bold text-green-600">48</p>
                            </div>
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">👨‍🏫</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Student Batches</p>
                                <p class="text-2xl font-bold text-purple-600">16</p>
                            </div>
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">👥</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600">Utilization Rate</p>
                                <p class="text-2xl font-bold text-orange-600">94%</p>
                            </div>
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">📊</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">🚀 Quick Actions</h3>
                    <div class="grid md:grid-cols-3 gap-4">
                        <button onclick="switchTab('scheduleTab')" class="bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition-colors">
                            <div class="text-2xl mb-2">🧠</div>
                            <div class="font-medium">Generate New Timetable</div>
                        </button>
                        <button onclick="switchTab('editorTab')" class="bg-green-600 text-white p-4 rounded-lg hover:bg-green-700 transition-colors">
                            <div class="text-2xl mb-2">✏️</div>
                            <div class="font-medium">Edit Current Schedule</div>
                        </button>
                        <button onclick="switchTab('reportsTab')" class="bg-purple-600 text-white p-4 rounded-lg hover:bg-purple-700 transition-colors">
                            <div class="text-2xl mb-2">📈</div>
                            <div class="font-medium">View Reports</div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Data Input Section -->
            <div id="dataInputSection" class="hidden space-y-6">
                <!-- Student Control Panel (Admin) -->
                <div class="bg-gradient-to-br from-blue-50 via-white to-blue-100 rounded-2xl p-8 card-shadow spaced border border-blue-200">
                    <div class="flex items-center justify-between mb-8">
                        <div class="flex items-center gap-4">
                            <span class="text-4xl bg-blue-100 rounded-full p-3 shadow">🎒</span>
                            <h3 class="text-3xl font-extrabold text-blue-900 tracking-tight">Student Control Panel</h3>
                        </div>
                        <span class="bg-blue-600 text-white px-4 py-2 rounded-full text-lg font-semibold shadow">Admin</span>
                    </div>
                    <!-- Student Search Feature -->
                    <div class="mb-8 flex flex-col md:flex-row md:items-center gap-4">
                        <input id="studentSearchInput" type="text" placeholder="Search student by name, ID, or batch..." class="border-2 border-blue-300 px-5 py-3 rounded-xl flex-1 text-lg focus:ring-2 focus:ring-blue-400">
                        <button id="studentSearchBtn" class="bg-blue-700 text-white px-8 py-3 rounded-xl shadow-lg hover:bg-blue-800 transition text-lg font-semibold">🔍 Search</button>
                    </div>
                    <div id="studentSearchResults" class="mb-8"></div>
                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- Student Account Management -->
                        <div class="student-card bg-white rounded-xl p-6 shadow border border-blue-100">
                            <h4 class="student-section-title text-xl font-bold text-blue-700 mb-3 flex items-center gap-2">👤 Student Account Management</h4>
                            <div class="mb-3 flex gap-2">
                                <input id="addStudentNameInput" type="text" placeholder="Enter student name..." class="border border-blue-300 px-4 py-2 rounded-lg flex-1">
                                <button id="addStudentBtn" class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition font-semibold">Add Student</button>
                            </div>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2 font-semibold">Edit Profile</button>
                            <button class="bg-red-600 text-white px-5 py-2 rounded-lg shadow hover:bg-red-700 transition mt-2 font-semibold">Delete Account</button>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition mt-2 font-semibold">Reset Credentials</button>
                        </div>
                        <!-- Enrollment & Course Assignment -->
                        <div class="student-card bg-white rounded-xl p-6 shadow border border-blue-100">
                            <h4 class="student-section-title text-xl font-bold text-blue-700 mb-3 flex items-center gap-2">📚 Enrollment & Course Assignment</h4>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition font-semibold">Assign to Batch/Semester</button>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2 font-semibold">Allocate Subjects</button>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition mt-2 font-semibold">Handle Electives (NEP 2020)</button>
                        </div>
                        <!-- Timetable Access & Control -->
                        <div class="student-card bg-white rounded-xl p-6 shadow border border-blue-100">
                            <h4 class="student-section-title text-xl font-bold text-blue-700 mb-3 flex items-center gap-2">📅 Timetable Access & Control</h4>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition font-semibold">View Student Timetable</button>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2 font-semibold">Edit/Reschedule Classes</button>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition mt-2 font-semibold">Check Subject Clashes</button>
                        </div>
                        <!-- Attendance Monitoring -->
                        <div class="student-card bg-white rounded-xl p-6 shadow border border-blue-100">
                            <h4 class="student-section-title text-xl font-bold text-blue-700 mb-3 flex items-center gap-2">📊 Attendance Monitoring</h4>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition font-semibold">View Attendance Reports</button>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2 font-semibold">Track Low Attendance</button>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition mt-2 font-semibold">Generate Summary</button>
                        </div>
                        <!-- Assignment & Exam Tracking -->
                        <div class="student-card bg-white rounded-xl p-6 shadow border border-blue-100">
                            <h4 class="student-section-title text-xl font-bold text-blue-700 mb-3 flex items-center gap-2">📝 Assignment & Exam Tracking</h4>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition font-semibold">Monitor Submissions</button>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2 font-semibold">View Grading Status</button>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition mt-2 font-semibold">Completion Reports</button>
                        </div>
                        <!-- Performance Analytics -->
                        <div class="student-card diagram-box bg-white rounded-xl p-6 shadow border border-blue-100">
                            <h4 class="student-section-title text-xl font-bold text-blue-700 mb-3 flex items-center gap-2">📈 Performance Analytics</h4>
                            <div class="bar-chart flex gap-2 mb-2">
                                <div class="bar bg-blue-200 text-blue-900 font-bold rounded-lg flex items-end justify-center" style="height:80px; width:40px">80</div>
                                <div class="bar bg-blue-300 text-blue-900 font-bold rounded-lg flex items-end justify-center" style="height:95px; width:40px">95</div>
                                <div class="bar bg-blue-200 text-blue-900 font-bold rounded-lg flex items-end justify-center" style="height:70px; width:40px">70</div>
                                <div class="bar bg-blue-300 text-blue-900 font-bold rounded-lg flex items-end justify-center" style="height:60px; width:40px">60</div>
                            </div>
                            <div class="flex gap-4 mb-2">
                                <div class="bar-label text-blue-700 font-semibold">Math</div>
                                <div class="bar-label text-blue-700 font-semibold">AI</div>
                                <div class="bar-label text-blue-700 font-semibold">DS</div>
                                <div class="bar-label text-blue-700 font-semibold">ES</div>
                            </div>
                            <div class="progress-label text-blue-800 font-semibold mb-1">Academic Progress</div>
                            <div class="progress-bar bg-blue-100 rounded-full h-4 w-full mb-2"><div class="progress-bar-inner bg-blue-600 h-4 rounded-full" style="width:85%"></div></div>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition mt-2 font-semibold">View Analytics Dashboard</button>
                        </div>
                        <!-- Communication & Notifications -->
                        <div class="student-card bg-white rounded-xl p-6 shadow border border-blue-100">
                            <h4 class="student-section-title text-xl font-bold text-blue-700 mb-3 flex items-center gap-2">📢 Communication & Notifications</h4>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition font-semibold">Send Announcement</button>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2 font-semibold">Push Notification</button>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition mt-2 font-semibold">Bulk Communication</button>
                        </div>
                        <!-- Parent/Guardian Access -->
                        <div class="student-card bg-white rounded-xl p-6 shadow border border-blue-100">
                            <h4 class="student-section-title text-xl font-bold text-blue-700 mb-3 flex items-center gap-2">👨‍👩‍👧‍👦 Parent/Guardian Access</h4>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition font-semibold">Enable Parent View</button>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2">Share Progress</button>
                        </div>
                        <!-- Fee & Access Control -->
                        <div class="student-card">
                            <h4 class="student-section-title">💳 Fee & Access Control</h4>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition">Manage Accounts</button>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2">Control Access</button>
                        </div>
                        <!-- Reports & Export Options -->
                        <div class="student-card">
                            <h4 class="student-section-title">📤 Reports & Export Options</h4>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition">Export Student List</button>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2">Export Attendance</button>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition mt-2">Export Performance</button>
                        </div>
                    </div>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Classroom Management -->
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">🏫 Classroom Management</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-3 gap-3">
                                <input type="text" placeholder="Room Name" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <input type="number" placeholder="Capacity" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <select class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option>Lecture Hall</option>
                                    <option>Laboratory</option>
                                    <option>Seminar Room</option>
                                    <option>Auditorium</option>
                                </select>
                            </div>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                + Add Classroom
                            </button>
                        </div>
                        
                        <div class="mt-4 max-h-40 overflow-y-auto">
                            <div id="classroomList" class="space-y-2">
                                <!-- Dynamic classroom list -->
                            </div>
                        </div>
                    </div>

                    <!-- Faculty Management -->
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">👨‍🏫 Faculty Management</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-3">
                                <input type="text" placeholder="Faculty Name" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <input type="text" placeholder="Department" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div class="grid grid-cols-2 gap-3">
                                <input type="text" placeholder="Subjects (comma-separated)" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <input type="number" placeholder="Max Hours/Week" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <button class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                + Add Faculty
                            </button>
                        </div>
                        
                        <div class="mt-4 max-h-40 overflow-y-auto">
                            <div id="facultyList" class="space-y-2">
                                <!-- Dynamic faculty list -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Subject & Batch Configuration -->
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">📚 Subject Configuration</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-3 gap-3">
                                <input type="text" placeholder="Subject Name" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <input type="number" placeholder="Hours/Week" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <select class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option>Theory</option>
                                    <option>Practical</option>
                                    <option>Tutorial</option>
                                </select>
                            </div>
                            <button class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                + Add Subject
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">👥 Student Batches</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-3 gap-3">
                                <input type="text" placeholder="Batch Name" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <input type="number" placeholder="Students" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <select class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option>UG</option>
                                    <option>PG</option>
                                    <option>Diploma</option>
                                </select>
                            </div>
                            <button class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors">
                                + Add Batch
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Generation Section -->
            <div id="scheduleSection" class="hidden space-y-6">
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">🧠 Advanced Scheduling Engine</h3>
                    
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-3">⚙️ Optimization Algorithm</h4>
                            <select id="algorithmSelect" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="csp">Constraint Satisfaction Problem (CSP)</option>
                                <option value="genetic">Genetic Algorithm</option>
                                <option value="heuristic">Heuristic Optimization</option>
                                <option value="hybrid">Hybrid Multi-Algorithm</option>
                            </select>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-3">🎯 Optimization Priority</h4>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option>Balanced Optimization</option>
                                <option>Minimize Faculty Conflicts</option>
                                <option>Maximize Room Utilization</option>
                                <option>Even Subject Distribution</option>
                            </select>
                        </div>
                    </div>

                    <!-- Constraints Configuration -->
                    <div class="bg-gray-50 rounded-lg p-4 mb-6">
                        <h4 class="font-semibold text-gray-700 mb-3">🔒 Scheduling Constraints</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2 text-blue-600">
                                    <span class="text-sm">No faculty double-booking</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2 text-blue-600">
                                    <span class="text-sm">No classroom conflicts</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2 text-blue-600">
                                    <span class="text-sm">Respect faculty availability</span>
                                </label>
                            </div>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2 text-blue-600">
                                    <span class="text-sm">Balance daily workload</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2 text-blue-600">
                                    <span class="text-sm">Minimize gaps between classes</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2 text-blue-600">
                                    <span class="text-sm">Prefer morning slots for theory</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Generation Progress -->
                    <div id="generationProgress" class="hidden bg-blue-50 rounded-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-semibold text-blue-800">🔄 Optimization in Progress</h4>
                            <div class="optimization-indicator w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full"></div>
                        </div>
                        <div class="bg-blue-200 rounded-full h-3 mb-4">
                            <div id="optimizationProgress" class="bg-blue-600 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                        </div>
                        <p id="optimizationStatus" class="text-sm text-blue-700">Initializing constraint satisfaction engine...</p>
                    </div>

                    <!-- Generate Button -->
                    <div class="text-center">
                        <button id="generateScheduleBtn" class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-medium">
                            🚀 Generate Optimized Timetable
                        </button>
                    </div>

                    <!-- Multiple Solutions Display -->
                    <div id="solutionsDisplay" class="hidden mt-8">
                        <h4 class="font-semibold text-gray-800 mb-4">📊 Generated Solutions (Choose Best Option)</h4>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4 cursor-pointer hover:bg-green-100 transition-colors">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium text-green-800">Solution A</span>
                                    <span class="text-green-600 font-bold">96%</span>
                                </div>
                                <div class="text-sm text-green-700">
                                    <div>✅ Zero conflicts</div>
                                    <div>✅ Balanced workload</div>
                                    <div>⚠️ 2 minor gaps</div>
                                </div>
                            </div>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 cursor-pointer hover:bg-blue-100 transition-colors">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium text-blue-800">Solution B</span>
                                    <span class="text-blue-600 font-bold">92%</span>
                                </div>
                                <div class="text-sm text-blue-700">
                                    <div>✅ Optimal room usage</div>
                                    <div>⚠️ 1 soft constraint</div>
                                    <div>✅ Even distribution</div>
                                </div>
                            </div>
                            <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 cursor-pointer hover:bg-purple-100 transition-colors">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-medium text-purple-800">Solution C</span>
                                    <span class="text-purple-600 font-bold">89%</span>
                                </div>
                                <div class="text-sm text-purple-700">
                                    <div>✅ Faculty preferences</div>
                                    <div>✅ Minimal gaps</div>
                                    <div>⚠️ Room utilization 85%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timetable Editor Section -->
            <div id="editorSection" class="hidden space-y-6">
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 md:mb-0">✏️ Interactive Timetable Editor</h3>
                        <div class="flex flex-wrap gap-3">
                            <select id="viewFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option>All Departments</option>
                                <option>Computer Science</option>
                                <option>Electronics</option>
                                <option>Mechanical</option>
                            </select>
                            <button id="saveChanges" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                💾 Save Changes
                            </button>
                            <button id="exportTimetable" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                📤 Export
                            </button>
                        </div>
                    </div>

                    <!-- Conflict Warnings -->
                    <div id="conflictWarnings" class="hidden mb-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                        <h4 class="font-semibold text-red-800 mb-2">⚠️ Scheduling Conflicts Detected</h4>
                        <div id="conflictList" class="text-sm text-red-700">
                            <!-- Dynamic conflict list -->
                        </div>
                    </div>

                    <!-- Drag & Drop Timetable Grid -->
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse min-w-full">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="border border-gray-300 px-4 py-3 text-left font-semibold min-w-24">Time</th>
                                    <th class="border border-gray-300 px-4 py-3 text-center font-semibold min-w-32">Monday</th>
                                    <th class="border border-gray-300 px-4 py-3 text-center font-semibold min-w-32">Tuesday</th>
                                    <th class="border border-gray-300 px-4 py-3 text-center font-semibold min-w-32">Wednesday</th>
                                    <th class="border border-gray-300 px-4 py-3 text-center font-semibold min-w-32">Thursday</th>
                                    <th class="border border-gray-300 px-4 py-3 text-center font-semibold min-w-32">Friday</th>
                                </tr>
                            </thead>
                            <tbody id="timetableGrid">
                                <!-- Dynamic timetable grid -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Legend -->
                    <div class="mt-6 flex flex-wrap gap-4 text-sm">
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-blue-100 border border-blue-300 rounded mr-2"></div>
                            <span>Theory Classes</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-green-100 border border-green-300 rounded mr-2"></div>
                            <span>Practical/Lab</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-purple-100 border border-purple-300 rounded mr-2"></div>
                            <span>Tutorial</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-red-100 border border-red-300 rounded mr-2"></div>
                            <span>Conflict</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reportsSection" class="hidden space-y-6">
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Faculty Load Report -->
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">👨‍🏫 Faculty Workload Report</h3>
                        <div class="space-y-3 max-h-64 overflow-y-auto">
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <div class="font-medium">Dr. Smith (CS)</div>
                                    <div class="text-sm text-gray-600">18 hours/week</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-green-600 font-bold">90%</div>
                                    <div class="text-xs text-gray-500">Optimal</div>
                                </div>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <div class="font-medium">Prof. Johnson (ECE)</div>
                                    <div class="text-sm text-gray-600">22 hours/week</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-orange-600 font-bold">110%</div>
                                    <div class="text-xs text-gray-500">Overloaded</div>
                                </div>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <div class="font-medium">Dr. Williams (ME)</div>
                                    <div class="text-sm text-gray-600">14 hours/week</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-blue-600 font-bold">70%</div>
                                    <div class="text-xs text-gray-500">Underutilized</div>
                                </div>
                            </div>
                        </div>
                        <button class="mt-4 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                                        📊 Generate Full Report
                                                </button>
                                                <div id="fullReportModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.3);z-index:999;align-items:center;justify-content:center;">
                                                    <div style="background:#fff;border-radius:1rem;max-width:500px;width:90vw;padding:2rem;box-shadow:0 8px 32px rgba(60,80,180,0.15);margin:auto;">
                                                        <h3 style="font-size:1.3rem;font-weight:700;color:#3730a3;margin-bottom:1rem;">Full Report (Demo)</h3>
                                                        <ul style="font-size:1rem;color:#222;line-height:1.7;">
                                                            <li><strong>Faculty:</strong> Dr. Smith, Prof. Johnson, Dr. Williams</li>
                                                            <li><strong>Active Faculty:</strong> 48</li>
                                                            <li><strong>Classrooms:</strong> Room A101, Lab B203, Room C305, Auditorium</li>
                                                            <li><strong>Utilization Rate:</strong> 94%</li>
                                                            <li><strong>Student Batches:</strong> 16</li>
                                                            <li><strong>Attendance:</strong> 96% (Priya Sharma)</li>
                                                            <li><strong>Performance:</strong> 8.7 GPA (Priya Sharma)</li>
                                                            <li><strong>Room Utilization:</strong> Room A101: 95%, Lab B203: 78%, Room C305: 45%</li>
                                                            <li><strong>Remarks:</strong> All systems optimal. No major conflicts detected.</li>
                                                        </ul>
                                                        <button id="closeFullReportModal" style="margin-top:1.5rem;background:#6366f1;color:#fff;padding:0.5rem 1.2rem;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;">Close</button>
                                                    </div>
                                                </div>
                        </button>
                    </div>

                    <!-- Room Utilization Report -->
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">🏫 Room Utilization Report</h3>
                        <div class="space-y-3 max-h-64 overflow-y-auto">
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <div class="font-medium">Room A101 (Lecture)</div>
                                    <div class="text-sm text-gray-600">Capacity: 60</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-green-600 font-bold">95%</div>
                                    <div class="text-xs text-gray-500">Excellent</div>
                                </div>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <div class="font-medium">Lab B203 (Computer)</div>
                                    <div class="text-sm text-gray-600">Capacity: 30</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-blue-600 font-bold">78%</div>
                                    <div class="text-xs text-gray-500">Good</div>
                                </div>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                <div>
                                    <div class="font-medium">Room C305 (Seminar)</div>
                                    <div class="text-sm text-gray-600">Capacity: 25</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-orange-600 font-bold">45%</div>
                                    <div class="text-xs text-gray-500">Underused</div>
                                </div>
                            </div>
                        </div>
                        <button class="mt-4 w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">
                            📈 Detailed Analytics
                        </button>
                    </div>
                </div>

                <!-- Export Options -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">📤 Export & Download Options</h3>
                    <div class="grid md:grid-cols-3 gap-4">
                        <button class="bg-red-600 text-white p-4 rounded-lg hover:bg-red-700 transition-colors">
                            <div class="text-2xl mb-2">📄</div>
                            <div class="font-medium">Export as PDF</div>
                            <div class="text-sm opacity-90">Complete timetable report</div>
                        </button>
                        <button class="bg-green-600 text-white p-4 rounded-lg hover:bg-green-700 transition-colors">
                            <div class="text-2xl mb-2">📊</div>
                            <div class="font-medium">Export as Excel</div>
                            <div class="text-sm opacity-90">Editable spreadsheet format</div>
                        </button>
                        <button class="bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition-colors">
                            <div class="text-2xl mb-2">📅</div>
                            <div class="font-medium">Export as iCal</div>
                            <div class="text-sm opacity-90">Calendar integration</div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Approval Workflow Section (Department Head) -->
            <div id="approvalSection" class="hidden space-y-6">
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h3 class="text-xl font-semibold mb-6 text-gray-800">✅ Timetable Approval Workflow</h3>
                    
                    <div class="space-y-4">
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-semibold text-yellow-800">Pending Approval: CS Department Timetable</h4>
                                    <p class="text-sm text-yellow-700">Generated on: Oct 15, 2024 | Fitness Score: 96%</p>
                                    <p class="text-xs text-yellow-600 mt-1">Submitted by: System Administrator</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                        ✅ Approve
                                    </button>
                                    <button class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">
                                        ❌ Reject
                                    </button>
                                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                        👁️ Review
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-semibold text-green-800">✅ Approved: ECE Department Timetable</h4>
                                    <p class="text-sm text-green-700">Approved on: Oct 12, 2024 | Status: Active</p>
                                    <p class="text-xs text-green-600 mt-1">Approved by: Dr. Johnson (Dept. Head)</p>
                                </div>
                                <div class="flex space-x-2">
                                    <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                        📄 View Details
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Faculty View Section -->
            <div id="facultyViewSection" class="hidden space-y-6">
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h3 class="text-xl font-semibold mb-6 text-gray-800">👨‍🏫 My Teaching Schedule</h3>
                    <!-- Personal Stats -->
                    <div class="grid md:grid-cols-4 gap-4 mb-6">
                                    <div class="bg-blue-50 rounded-lg p-4 text-center">
                                        <div class="text-2xl mb-2">📚</div>
                                        <div class="text-sm text-gray-600">Weekly Hours</div>
                                        <div class="text-xl font-bold text-blue-600">18</div>
                                    </div>
                                    <div class="bg-green-50 rounded-lg p-4 text-center">
                                        <div class="text-2xl mb-2">🏫</div>
                                        <div class="text-sm text-gray-600">Subjects</div>
                                        <div class="text-xl font-bold text-green-600">3</div>
                                    </div>
                                    <div class="bg-purple-50 rounded-lg p-4 text-center">
                                        <div class="text-2xl mb-2">👥</div>
                                        <div class="text-sm text-gray-600">Classes</div>
                                        <div class="text-xl font-bold text-purple-600">5</div>
                                    </div>
                                    <div class="bg-orange-50 rounded-lg p-4 text-center">
                                        <div class="text-2xl mb-2">⚡</div>
                                        <div class="text-sm text-gray-600">Workload</div>
                                        <div class="text-xl font-bold text-orange-600">90%</div>
                                    </div>
                    </div>
                    <!-- Personal Timetable -->
                    <div class="overflow-x-auto mb-8">
                        <table class="w-full border-collapse">
                            <thead>
                                <tr class="bg-purple-50">
                                    <th class="border border-purple-200 px-4 py-3 text-left font-semibold">Time</th>
                                    <th class="border border-purple-200 px-4 py-3 text-center font-semibold">Mon</th>
                                    <th class="border border-purple-200 px-4 py-3 text-center font-semibold">Tue</th>
                                    <th class="border border-purple-200 px-4 py-3 text-center font-semibold">Wed</th>
                                    <th class="border border-purple-200 px-4 py-3 text-center font-semibold">Thu</th>
                                    <th class="border border-purple-200 px-4 py-3 text-center font-semibold">Fri</th>
                                </tr>
                            </thead>
                            <tbody id="facultyTimetableGrid">
                                <!-- Faculty personal timetable -->
                            </tbody>
                        </table>
                    </div>
                    <!-- New Feature Cards -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Smart Timetable Management -->
                        <div class="student-card">
                            <h4 class="student-section-title">🗓️ Smart Timetable Management</h4>
                            <div class="mb-2 text-gray-700">View, swap, or reschedule classes. Requests require admin approval.</div>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition">Request Swap/Reschedule</button>
                        </div>
                        <!-- Automated Attendance System -->
                        <div class="student-card">
                            <h4 class="student-section-title">📝 Automated Attendance</h4>
                            <div class="mb-2 text-gray-700">Mark attendance via QR/face recognition. Generate instant reports.</div>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition">Mark Attendance</button>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition mt-2">Generate Report</button>
                        </div>
                        <!-- Content Sharing & Recording -->
                        <div class="student-card">
                            <h4 class="student-section-title">📤 Content Sharing & Recording</h4>
                            <div class="mb-2 text-gray-700">Upload notes, videos, or resources. Record and auto-upload sessions.</div>
                            <input type="file" class="mb-2">
                            <button class="bg-yellow-600 text-white px-5 py-2 rounded-lg shadow hover:bg-yellow-700 transition">Upload Resource</button>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition mt-2">Record Session</button>
                        </div>
                        <!-- Assignment & Exam Management -->
                        <div class="student-card">
                            <h4 class="student-section-title">📝 Assignment & Exam Management</h4>
                            <div class="mb-2 text-gray-700">Create, assign, and grade assignments. Auto-grade objective tests.</div>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition">Create Assignment</button>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition mt-2">Auto-Grade Test</button>
                        </div>
                        <!-- Faculty Collaboration Tools -->
                        <div class="student-card">
                            <h4 class="student-section-title">🤝 Faculty Collaboration</h4>
                            <div class="mb-2 text-gray-700">Share resources, manage joint/interdisciplinary classes.</div>
                            <button class="bg-green-600 text-white px-5 py-2 rounded-lg shadow hover:bg-green-700 transition">Share Resource</button>
                            <button class="bg-purple-600 text-white px-5 py-2 rounded-lg shadow hover:bg-purple-700 transition mt-2">Manage Joint Class</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Availability Management Section -->
            <div id="availabilitySection" class="hidden space-y-6">
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h3 class="text-xl font-semibold mb-6 text-gray-800">📋 Manage My Availability</h3>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-3">🕒 Preferred Time Slots</h4>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2 text-purple-600">
                                    <span class="text-sm">9:00 AM - 11:00 AM (Morning)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="mr-2 text-purple-600">
                                    <span class="text-sm">11:00 AM - 1:00 PM (Late Morning)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2 text-purple-600">
                                    <span class="text-sm">2:00 PM - 4:00 PM (Afternoon)</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2 text-purple-600">
                                    <span class="text-sm">4:00 PM - 6:00 PM (Evening)</span>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-700 mb-3">📅 Leave Requests</h4>
                            <div class="space-y-3">
                                <div class="flex gap-2 mb-2">
                                    <input id="leaveDateInput" type="date" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                    <input id="leaveReasonInput" type="text" placeholder="Reason" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                    <button id="addLeaveBtn" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">+ Add Leave</button>
                                </div>
                                <div id="leaveList"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 text-center">
                        <button id="updateAvailabilityBtn" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            💾 Update Availability
                        </button>
                        <div id="availabilityStatus" class="mt-4 text-base text-purple-700"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentUser = null;
        let currentRole = null;
        let timetableData = {};
        let draggedElement = null;

        // Authentication
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const role = document.getElementById('userRole').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Simple demo authentication
            if ((role === 'admin' && username === 'admin' && password === 'admin123') ||
                (role === 'department' && username === 'dept' && password === 'dept123') ||
                (role === 'faculty' && username === 'faculty' && password === 'faculty123') ||
                (role === 'student' && username === 'student' && password === 'student123')) {
                currentUser = username;
                currentRole = role;
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('mainApp').classList.remove('hidden');
                document.getElementById('logoutBtn').style.display = 'inline-block';
                document.getElementById('appTitle').textContent = 'EduSchedule Pro';
                setupRoleBasedUI();
                initializeData();
            } else {
                alert('Invalid credentials! Use demo credentials shown below the form.');
            }
        });

        function logout() {
            currentUser = null;
            currentRole = null;
            document.getElementById('loginScreen').style.display = 'block';
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('logoutBtn').style.display = 'none';
        }

        // Role-based UI setup
        function setupRoleBasedUI() {
            const userInfo = document.getElementById('userInfo');
            
            // Hide all tab sets
            document.getElementById('adminTabs').classList.add('hidden');
            document.getElementById('departmentTabs').classList.add('hidden');
            document.getElementById('facultyTabs').classList.add('hidden');
            document.getElementById('studentTabs').classList.add('hidden');
            document.getElementById('studentFeedbackSection').classList.add('hidden');

            if (currentRole === 'admin') {
                userInfo.textContent = '👑 System Administrator';
                document.getElementById('adminTabs').classList.remove('hidden');
                setupAdminTabs();
            } else if (currentRole === 'department') {
                userInfo.textContent = '🏛️ Department Head';
                document.getElementById('departmentTabs').classList.remove('hidden');
                setupDepartmentTabs();
            } else if (currentRole === 'faculty') {
                userInfo.textContent = '👨‍🏫 Faculty Member';
                document.getElementById('facultyTabs').classList.remove('hidden');
                setupFacultyTabs();
            } else if (currentRole === 'student') {
                userInfo.textContent = '🎒 Student';
                document.getElementById('studentTabs').classList.remove('hidden');
                document.getElementById('studentFeedbackSection').classList.remove('hidden');
                setupStudentTabs();
            }
        }

        // Tab management for different roles
        function setupAdminTabs() {
            const tabs = ['dashboardTab', 'dataInputTab', 'scheduleTab', 'editorTab', 'reportsTab'];
            const sections = ['dashboardSection', 'dataInputSection', 'scheduleSection', 'editorSection', 'reportsSection'];
            setupTabSwitching(tabs, sections);
        }

        function setupDepartmentTabs() {
            const tabs = ['approvalTab', 'deptViewTab', 'deptReportsTab'];
            const sections = ['approvalSection', 'editorSection', 'reportsSection'];
            setupTabSwitching(tabs, sections);
            
            // Show approval section by default
            showSection('approvalSection');
        }

        function setupFacultyTabs() {
            const tabs = ['facultyViewTab', 'availabilityTab', 'facultyReportsTab'];
            const sections = ['facultyViewSection', 'availabilitySection', 'reportsSection'];
            setupTabSwitching(tabs, sections);
            
            // Show faculty view by default
            showSection('facultyViewSection');
            generateFacultyTimetable();
        }

        function setupTabSwitching(tabs, sections) {
            tabs.forEach((tabId, index) => {
                const tabElement = document.getElementById(tabId);
                if (tabElement) {
                    tabElement.addEventListener('click', () => {
                        // Update tab styles
                        tabs.forEach(id => {
                            const tab = document.getElementById(id);
                            if (tab) {
                                tab.classList.remove('bg-blue-600', 'bg-green-600', 'bg-purple-600', 'text-white');
                                tab.classList.add('text-gray-600');
                            }
                        });
                        
                        // Set active tab color based on role
                        const activeColor = currentRole === 'admin' ? 'bg-blue-600' : 
                                          currentRole === 'department' ? 'bg-green-600' : 'bg-purple-600';
                        tabElement.classList.add(activeColor, 'text-white');
                        tabElement.classList.remove('text-gray-600');

                        // Show corresponding section
                        showSection(sections[index]);
                    });
                }
            });
        }

        function showSection(sectionId) {
            // Hide all sections
            const allSections = ['dashboardSection', 'dataInputSection', 'scheduleSection', 'editorSection', 'reportsSection', 'approvalSection', 'facultyViewSection', 'availabilitySection'];
            allSections.forEach(id => {
                const section = document.getElementById(id);
                if (section) section.classList.add('hidden');
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) targetSection.classList.remove('hidden');
        }

        function switchTab(tabId) {
            document.getElementById(tabId).click();
        }

        // Initialize sample data
        function initializeData() {
            // Sample classrooms
            const classrooms = [
                { name: 'Room A101', capacity: 60, type: 'Lecture Hall' },
                { name: 'Lab B203', capacity: 30, type: 'Laboratory' },
                { name: 'Room C305', capacity: 25, type: 'Seminar Room' },
                { name: 'Auditorium', capacity: 200, type: 'Auditorium' }
            ];

            // Sample faculty
            const faculty = [
                { name: 'Dr. Smith', department: 'Computer Science', subjects: 'Data Structures, Algorithms', maxHours: 20 },
                { name: 'Prof. Johnson', department: 'Electronics', subjects: 'Digital Circuits, Microprocessors', maxHours: 18 },
                { name: 'Dr. Williams', department: 'Mechanical', subjects: 'Thermodynamics, Fluid Mechanics', maxHours: 22 }
            ];

            populateDataLists(classrooms, faculty);
            generateSampleTimetable();
        }

        function populateDataLists(classrooms, faculty) {
            const classroomList = document.getElementById('classroomList');
            const facultyList = document.getElementById('facultyList');

            if (classroomList) {
                classrooms.forEach(room => {
                    const div = document.createElement('div');
                    div.className = 'flex justify-between items-center p-2 bg-gray-50 rounded text-sm';
                    div.innerHTML = `
                        <span><strong>${room.name}</strong> (${room.capacity}) - ${room.type}</span>
                        <button class="text-red-600 hover:text-red-800">Remove</button>
                    `;
                    classroomList.appendChild(div);
                });
            }

            if (facultyList) {
                faculty.forEach(member => {
                    const div = document.createElement('div');
                    div.className = 'flex justify-between items-center p-2 bg-gray-50 rounded text-sm';
                    div.innerHTML = `
                        <span><strong>${member.name}</strong> (${member.department}) - ${member.maxHours}h/week</span>
                        <button class="text-red-600 hover:text-red-800">Remove</button>
                    `;
                    facultyList.appendChild(div);
                });
            }
        }

        // Timetable generation simulation
        document.getElementById('generateScheduleBtn')?.addEventListener('click', () => {
            const progressSection = document.getElementById('generationProgress');
            const progressBar = document.getElementById('optimizationProgress');
            const statusText = document.getElementById('optimizationStatus');
            const generateBtn = document.getElementById('generateScheduleBtn');
            const solutionsDisplay = document.getElementById('solutionsDisplay');

            progressSection.classList.remove('hidden');
            generateBtn.disabled = true;
            generateBtn.textContent = 'Optimizing...';

            const algorithm = document.getElementById('algorithmSelect').value;
            const stages = {
                csp: [
                    'Initializing constraint satisfaction problem...',
                    'Defining variables and domains...',
                    'Setting up constraints...',
                    'Applying arc consistency...',
                    'Backtracking search...',
                    'Optimizing solution quality...',
                    'Generating multiple solutions...'
                ],
                genetic: [
                    'Creating initial population...',
                    'Evaluating fitness functions...',
                    'Selection and crossover...',
                    'Applying mutations...',
                    'Evolving generations...',
                    'Converging to optimal solutions...',
                    'Finalizing best candidates...'
                ],
                heuristic: [
                    'Analyzing scheduling constraints...',
                    'Applying greedy heuristics...',
                    'Local search optimization...',
                    'Conflict resolution...',
                    'Load balancing...',
                    'Fine-tuning schedule...',
                    'Validating final solution...'
                ]
            };

            const currentStages = stages[algorithm] || stages.csp;
            let progress = 0;
            let stageIndex = 0;

            const interval = setInterval(() => {
                progress += Math.random() * 10 + 5;
                if (progress > 100) progress = 100;

                progressBar.style.width = progress + '%';
                statusText.textContent = currentStages[stageIndex];

                if (progress >= (stageIndex + 1) * 14.3) {
                    stageIndex = Math.min(stageIndex + 1, currentStages.length - 1);
                }

                if (progress >= 100) {
                    clearInterval(interval);
                    statusText.textContent = '✅ Optimization completed! Multiple solutions generated.';
                    generateBtn.disabled = false;
                    generateBtn.textContent = '🎉 Generation Complete';
                    generateBtn.classList.remove('from-blue-600', 'to-purple-600');
                    generateBtn.classList.add('from-green-500', 'to-green-600');

                    solutionsDisplay.classList.remove('hidden');
                    generateSampleTimetable();

                    setTimeout(() => {
                        if (currentRole === 'admin') {
                            switchTab('editorTab');
                        }
                    }, 2000);
                }
            }, 200);
        });

        // Generate sample timetable
        function generateSampleTimetable() {
            const timeSlots = ['9:00-10:00', '10:00-11:00', '11:15-12:15', '12:15-1:15', '2:15-3:15', '3:15-4:15'];
            const subjects = ['Data Structures', 'Digital Circuits', 'Thermodynamics', 'Mathematics', 'Physics', 'Chemistry'];
            const rooms = ['A101', 'B203', 'C305', 'Lab1', 'Lab2'];
            const batches = ['CS-A', 'CS-B', 'ECE-A', 'ME-A'];
            const faculty = ['Dr. Smith', 'Prof. Johnson', 'Dr. Williams', 'Dr. Brown'];

            const timetableGrid = document.getElementById('timetableGrid');
            if (!timetableGrid) return;

            timetableGrid.innerHTML = '';

            timeSlots.forEach((time, timeIndex) => {
                const row = document.createElement('tr');
                
                // Time column
                const timeCell = document.createElement('td');
                timeCell.className = 'border border-gray-300 px-4 py-3 font-medium bg-gray-50';
                timeCell.textContent = time;
                row.appendChild(timeCell);

                // Day columns
                for (let day = 0; day < 5; day++) {
                    const cell = document.createElement('td');
                    cell.className = 'border border-gray-300 p-2 timetable-cell';
                    cell.setAttribute('data-time', timeIndex);
                    cell.setAttribute('data-day', day);

                    if (Math.random() > 0.2) { // 80% chance of having a class
                        const subject = subjects[Math.floor(Math.random() * subjects.length)];
                        const room = rooms[Math.floor(Math.random() * rooms.length)];
                        const batch = batches[Math.floor(Math.random() * batches.length)];
                        const teacher = faculty[Math.floor(Math.random() * faculty.length)];
                        
                        const classType = subject.includes('Lab') || room.includes('Lab') ? 'lab' : 
                                        subject.includes('Tutorial') ? 'tutorial' : 'theory';
                        
                        const bgColor = classType === 'lab' ? 'bg-green-100 border-green-300' :
                                       classType === 'tutorial' ? 'bg-purple-100 border-purple-300' :
                                       'bg-blue-100 border-blue-300';

                        cell.innerHTML = `
                            <div class="${bgColor} rounded-lg p-2 text-sm cursor-move" draggable="true">
                                <div class="font-semibold text-gray-800 truncate">${subject}</div>
                                <div class="text-gray-600 truncate">${batch}</div>
                                <div class="text-xs text-gray-500 truncate">${teacher}</div>
                                <div class="text-xs text-gray-500 truncate">${room}</div>
                            </div>
                        `;

                        // Add drag and drop functionality
                        const classDiv = cell.querySelector('div');
                        classDiv.addEventListener('dragstart', handleDragStart);
                        classDiv.addEventListener('dragend', handleDragEnd);
                    }

                    // Add drop zone functionality
                    cell.addEventListener('dragover', handleDragOver);
                    cell.addEventListener('drop', handleDrop);
                    cell.addEventListener('dragleave', handleDragLeave);

                    row.appendChild(cell);
                }

                timetableGrid.appendChild(row);
            });
        }

        // Generate faculty personal timetable
        function generateFacultyTimetable() {
            const timeSlots = ['9:00-10:00', '10:00-11:00', '11:15-12:15', '12:15-1:15', '2:15-3:15', '3:15-4:15'];
            const facultySubjects = ['Data Structures', 'Algorithms', 'Database Systems'];
            const batches = ['CS-A', 'CS-B', 'CS-C'];
            const rooms = ['A101', 'Lab B203', 'C305'];

            const facultyGrid = document.getElementById('facultyTimetableGrid');
            if (!facultyGrid) return;

            facultyGrid.innerHTML = '';

            timeSlots.forEach(time => {
                const row = document.createElement('tr');
                
                // Time column
                const timeCell = document.createElement('td');
                timeCell.className = 'border border-purple-200 px-4 py-3 font-medium bg-purple-50';
                timeCell.textContent = time;
                row.appendChild(timeCell);

                // Day columns
                for (let day = 0; day < 5; day++) {
                    const cell = document.createElement('td');
                    cell.className = 'border border-purple-200 p-2';

                    if (Math.random() > 0.4) { // 60% chance of having a class
                        const subject = facultySubjects[Math.floor(Math.random() * facultySubjects.length)];
                        const room = rooms[Math.floor(Math.random() * rooms.length)];
                        const batch = batches[Math.floor(Math.random() * batches.length)];
                        
                        cell.innerHTML = `
                            <div class="bg-purple-100 border border-purple-300 rounded-lg p-2 text-sm">
                                <div class="font-semibold text-purple-800 truncate">${subject}</div>
                                <div class="text-purple-600 truncate">${batch}</div>
                                <div class="text-xs text-purple-500 truncate">${room}</div>
                            </div>
                        `;
                    }

                    row.appendChild(cell);
                }

                facultyGrid.appendChild(row);
            });
        }

        // Drag and Drop functionality
        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedElement = null;
            
            // Remove all drop zone indicators
            document.querySelectorAll('.drop-zone').forEach(cell => {
                cell.classList.remove('drop-zone');
            });
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            
            if (!e.currentTarget.querySelector('div')) {
                e.currentTarget.classList.add('drop-zone');
            }
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drop-zone');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drop-zone');
            
            if (draggedElement && !e.currentTarget.querySelector('div')) {
                // Move the dragged element to the new cell
                e.currentTarget.appendChild(draggedElement);
                
                // Check for conflicts
                checkScheduleConflicts();
                
                // Show save changes button
                const saveBtn = document.getElementById('saveChanges');
                if (saveBtn) {
                    saveBtn.classList.add('bg-orange-600');
                    saveBtn.textContent = '💾 Save Changes*';
                }
            }
        }

        // Conflict detection
        function checkScheduleConflicts() {
            const conflicts = [];
            const conflictWarnings = document.getElementById('conflictWarnings');
            const conflictList = document.getElementById('conflictList');
            
            // Simple conflict detection logic (can be expanded)
            const cells = document.querySelectorAll('.timetable-cell div');
            const scheduleMap = new Map();
            
            cells.forEach(cell => {
                const faculty = cell.querySelector('.text-xs')?.textContent;
                const timeSlot = cell.closest('td').getAttribute('data-time');
                const day = cell.closest('td').getAttribute('data-day');
                
                if (faculty && timeSlot && day) {
                    const key = `${faculty}-${timeSlot}-${day}`;
                    if (scheduleMap.has(key)) {
                        conflicts.push(`${faculty} has multiple classes at the same time`);
                        cell.classList.add('conflict-warning');
                    } else {
                        scheduleMap.set(key, true);
                        cell.classList.remove('conflict-warning');
                    }
                }
            });
            
            if (conflicts.length > 0 && conflictWarnings && conflictList) {
                conflictWarnings.classList.remove('hidden');
                conflictList.innerHTML = conflicts.map(conflict => `<div>• ${conflict}</div>`).join('');
            } else if (conflictWarnings) {
                conflictWarnings.classList.add('hidden');
            }
        }

        // Save changes functionality
        document.getElementById('saveChanges')?.addEventListener('click', () => {
            const saveBtn = document.getElementById('saveChanges');
            saveBtn.textContent = '✅ Changes Saved';
            saveBtn.classList.remove('bg-orange-600');
            saveBtn.classList.add('bg-green-600');
            
            setTimeout(() => {
                saveBtn.textContent = '💾 Save Changes';
                saveBtn.classList.remove('bg-green-600');
                saveBtn.classList.add('bg-green-600');
            }, 2000);
        });

        // Export functionality
        document.getElementById('exportTimetable')?.addEventListener('click', () => {
            const exportOptions = ['PDF Report', 'Excel Spreadsheet', 'iCal Calendar'];
            const choice = prompt(`Choose export format:\n1. ${exportOptions[0]}\n2. ${exportOptions[1]}\n3. ${exportOptions[2]}\n\nEnter 1, 2, or 3:`);
            
            if (choice >= 1 && choice <= 3) {
                alert(`Exporting timetable as ${exportOptions[choice-1]}...\n\nDownload will start shortly! 📥`);
            }
        });

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            // Set default values for demo
            document.getElementById('username').value = 'admin';
            document.getElementById('password').value = 'admin123';
        });
    </script>
    <script src="timetable2.js"></script>
<script>
// Ensure Generate Full Report button always works
document.addEventListener('DOMContentLoaded', function() {
    var btns = Array.from(document.querySelectorAll('button'));
    var fullReportBtn = btns.find(b => b.textContent.includes('Generate Full Report'));
    var fullReportModal = document.getElementById('fullReportModal');
    var closeFullReportModal = document.getElementById('closeFullReportModal');
    if (fullReportBtn && fullReportModal && closeFullReportModal) {
        fullReportBtn.onclick = function() {
            fullReportModal.style.display = 'flex';
            fullReportModal.style.alignItems = 'center';
            fullReportModal.style.justifyContent = 'center';
        };
        closeFullReportModal.onclick = function() {
            fullReportModal.style.display = 'none';
        };
    }
});
</script>
<script>
// Demo logic for all major buttons
document.getElementById('studentSearchBtn').onclick = function() {
    var val = document.getElementById('studentSearchInput').value.trim();
    var results = document.getElementById('studentSearchResults');
    if (val) {
        results.innerHTML = '<div class="bg-blue-50 p-4 rounded-lg">Search result for <b>' + val + '</b>:<br>Priya Sharma (CS-A), Attendance: 96%, GPA: 8.7</div>';
    } else {
        results.innerHTML = '<div class="text-red-600">Please enter a search term.</div>';
    }
};

document.getElementById('addStudentBtn').onclick = function() {
    var name = document.getElementById('addStudentNameInput').value.trim();
    if (name) {
        alert('Student "' + name + '" added (demo).');
        document.getElementById('addStudentNameInput').value = '';
    } else {
        alert('Please enter a student name.');
    }
};

// Edit, Delete, Reset buttons (demo)
document.querySelectorAll('.bg-green-600').forEach(btn => {
    if (btn.textContent.includes('Edit Profile')) {
        btn.onclick = function() { alert('Edit Profile (demo)'); };
    }
    if (btn.textContent.includes('Allocate Subjects')) {
        btn.onclick = function() { alert('Allocate Subjects (demo)'); };
    }
    if (btn.textContent.includes('View Grading Status')) {
        btn.onclick = function() { alert('View Grading Status (demo)'); };
    }
    if (btn.textContent.includes('Track Low Attendance')) {
        btn.onclick = function() { alert('Track Low Attendance (demo)'); };
    }
    if (btn.textContent.includes('Push Notification')) {
        btn.onclick = function() { alert('Push Notification (demo)'); };
    }
    if (btn.textContent.includes('Share Progress')) {
        btn.onclick = function() { alert('Share Progress (demo)'); };
    }
    if (btn.textContent.includes('Control Access')) {
        btn.onclick = function() { alert('Control Access (demo)'); };
    }
    if (btn.textContent.includes('Export Attendance')) {
        btn.onclick = function() { alert('Export Attendance (demo)'); };
    }
});
document.querySelectorAll('.bg-red-600').forEach(btn => {
    if (btn.textContent.includes('Delete Account')) {
        btn.onclick = function() { alert('Delete Account (demo)'); };
    }
});
document.querySelectorAll('.bg-purple-600').forEach(btn => {
    if (btn.textContent.includes('Reset Credentials')) {
        btn.onclick = function() { alert('Reset Credentials (demo)'); };
    }
    if (btn.textContent.includes('Handle Electives')) {
        btn.onclick = function() { alert('Handle Electives (demo)'); };
    }
    if (btn.textContent.includes('Check Subject Clashes')) {
        btn.onclick = function() { alert('Check Subject Clashes (demo)'); };
    }
    if (btn.textContent.includes('Generate Summary')) {
        btn.onclick = function() { alert('Generate Summary (demo)'); };
    }
    if (btn.textContent.includes('Completion Reports')) {
        btn.onclick = function() { alert('Completion Reports (demo)'); };
    }
    if (btn.textContent.includes('Bulk Communication')) {
        btn.onclick = function() { alert('Bulk Communication (demo)'); };
    }
    if (btn.textContent.includes('Export Performance')) {
        btn.onclick = function() { alert('Export Performance (demo)'); };
    }
});
document.querySelectorAll('.bg-blue-600').forEach(btn => {
    if (btn.textContent.includes('Send Announcement')) {
        btn.onclick = function() { alert('Send Announcement (demo)'); };
    }
    if (btn.textContent.includes('Enable Parent View')) {
        btn.onclick = function() { alert('Enable Parent View (demo)'); };
    }
    if (btn.textContent.includes('Export Student List')) {
        btn.onclick = function() { alert('Export Student List (demo)'); };
    }
});
</script>
<script>
// Faculty availability dataset

function renderLeaveList() {
    const leaveList = document.getElementById('leaveList');
    leaveList.innerHTML = '';
    if (facultyAvailability.leaves.length === 0) {
        leaveList.innerHTML = '<div class="text-gray-500">No leave requests.</div>';
        return;
    }
    facultyAvailability.leaves.forEach((leave, idx) => {
        const div = document.createElement('div');
        div.className = 'bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex justify-between items-center mb-2';
        div.innerHTML = `<div><div class='font-medium text-yellow-800'>${leave.status}: ${leave.date}</div><div class='text-yellow-700'>Reason: ${leave.reason}</div></div><button class='remove-leave-btn bg-red-500 text-white px-3 py-1 rounded-lg ml-4' data-idx='${idx}'>Remove</button>`;
        leaveList.appendChild(div);
    });
    // Remove leave event
    leaveList.querySelectorAll('.remove-leave-btn').forEach(btn => {
        btn.onclick = function() {
            const idx = parseInt(btn.getAttribute('data-idx'));
            facultyAvailability.leaves.splice(idx, 1);
            renderLeaveList();
        };
    });
}

document.getElementById('addLeaveBtn').onclick = function() {
    const date = document.getElementById('leaveDateInput').value;
    const reason = document.getElementById('leaveReasonInput').value.trim();
    if (date && reason) {
        facultyAvailability.leaves.push({ date, reason, status: 'Pending' });
        renderLeaveList();
        document.getElementById('leaveDateInput').value = '';
        document.getElementById('leaveReasonInput').value = '';
    } else {
        alert('Please enter both date and reason for leave.');
    }
};

document.getElementById('updateAvailabilityBtn').onclick = function() {
    // Preferred time slots
    const slotLabels = document.querySelectorAll('#availabilitySection label');
    facultyAvailability.preferredSlots = [];
    slotLabels.forEach(label => {
        const checkbox = label.querySelector('input[type="checkbox"]');
        if (checkbox && checkbox.checked) {
            facultyAvailability.preferredSlots.push(label.textContent.trim());
        }
    });
    document.getElementById('availabilityStatus').textContent =
        'Availability updated! Preferred slots: ' + facultyAvailability.preferredSlots.join(', ') +
        '. Leaves: ' + facultyAvailability.leaves.map(l => l.date + ' (' + l.reason + ')').join(', ');
};

// Initial render
renderLeaveList();
</script>
<script>
// Faculty availability dataset
let facultyAvailability = {
    preferredSlots: ["9:00 AM - 11:00 AM", "11:00 AM - 1:00 PM"],
    leaves: [
        { date: "2024-10-25", reason: "Medical appointment", status: "Pending" }
    ]
};

document.getElementById('updateAvailabilityBtn').onclick = function() {
    // Preferred time slots
    const slotLabels = document.querySelectorAll('#availabilitySection label');
    facultyAvailability.preferredSlots = [];
    slotLabels.forEach(label => {
        const checkbox = label.querySelector('input[type="checkbox"]');
        if (checkbox && checkbox.checked) {
            facultyAvailability.preferredSlots.push(label.textContent.trim());
        }
    });

    // Leave requests
    // For demo, just keep the static leave
    // You can extend this to read from dynamic leave inputs

    document.getElementById('availabilityStatus').textContent =
        'Availability updated! Preferred slots: ' + facultyAvailability.preferredSlots.join(', ') +
        '. Leaves: ' + facultyAvailability.leaves.map(l => l.date + ' (' + l.reason + ')').join(', ');
};
</script>
<script>
function setupStudentTabs() {
    // Add feedback submit logic
    var submitBtn = document.getElementById('submitFeedbackBtn');
    if (submitBtn) {
        submitBtn.onclick = function() {
            var val = document.getElementById('feedbackInput').value.trim();
            var status = document.getElementById('feedbackStatus');
            if (val) {
                status.textContent = 'Feedback submitted: ' + val;
                document.getElementById('feedbackInput').value = '';
            } else {
                status.textContent = 'Please enter feedback before submitting.';
            }
        };
    }
}
</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9801fa4e823b7643',t:'MTc1ODA0MjYzMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
